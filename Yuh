-- Services
local Players = game:GetService("Players")
local ServerScriptService = game:GetService("ServerScriptService")

-- Configuration
local DAMAGE_AMOUNT = 100 -- Amount of damage to deal

-- Function to create a server-side script for damaging players
local function createDamageScript()
    -- Check if the script already exists
    local existingScript = ServerScriptService:FindFirstChild("DamageScript")
    if existingScript then
        return existingScript
    end

    -- Create a new Script
    local damageScript = Instance.new("Script")
    damageScript.Name = "DamageScript"
    damageScript.Source = [[
        -- Services
        local Players = game:GetService("Players")

        -- Configuration
        local DAMAGE_AMOUNT = 100 -- Amount of damage to deal

        -- Function to handle touch event
        local function onTouch(otherPart)
            local character = otherPart.Parent
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid and not Players:GetPlayerFromCharacter(character) then
                humanoid:TakeDamage(DAMAGE_AMOUNT)
            end
        end

        -- Function to initialize damage system for a player
        local function setupPlayer(player)
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

            -- Connect the Touched event to the onTouch function
            humanoidRootPart.Touched:Connect(onTouch)
        end

        -- Setup for existing players
        for _, player in ipairs(Players:GetPlayers()) do
            setupPlayer(player)
        end

        -- Setup for new players
        Players.PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function()
                setupPlayer(player)
            end)
        end)
    ]]
    damageScript.Parent = ServerScriptService
    return damageScript
end

-- Create or get the DamageScript
createDamageScript()
